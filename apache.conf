<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html

    # Quand je tape / ou /wordpress je veux arriver direct sur la page de connexion WordPress
    RedirectMatch ^/$ /wordpress/wp-login.php
    RedirectMatch ^/wordpress/?$ /wordpress/wp-login.php

    # Je prot√®ge tout avec un login navigateur (Basic Auth)
    <Directory /var/www/html>
        Options FollowSymLinks
        AllowOverride All
        Require all granted

        AuthType Basic
        AuthName "Acces protege"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    </Directory>

    # WordPress
    Alias /wordpress /var/www/html/wordpress
    <Directory /var/www/html/wordpress>
        Options FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # phpMyAdmin
    Alias /phpmyadmin /var/www/html/phpmyadmin
    <Directory /var/www/html/phpmyadmin>
        Options FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Dossier pour autoindex (on/off avec une variable ENV)
    Alias /files /var/www/html/files
    <Directory /var/www/html/files>
        Options FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>
</VirtualHost>
